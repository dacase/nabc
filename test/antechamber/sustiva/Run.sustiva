#!/bin/csh -f

# The Mulliken charges in sustiva.mol2.save were generated by sqm;
# you may get different results if a different QM program is applied

../../../bin/antechamber -i sustiva.pdb -fi pdb -o sustiva.mol2 -fo mol2 \
   -ek "qm_theory='AM1', grms_tol=0.002, tight_p_conv=1, scfconv=1.d-10, " \
   -c bcc >& antechamber.out || goto error
../../../bin/parmchk2 -s 1 -i sustiva.mol2 -f mol2 -o frcmod || goto error
../../../bin/tleap -s -f leap.in > leap.out

../../dacdif -a 5.5e-3 sustiva.mol2.save sustiva.mol2
../../dacdif frcmod.save frcmod
../../dacdif leap.out.save leap.out
../../dacdif -r 0.02 prmtop.save prmtop

/bin/rm -f ANTE* ATOMTYPE.INF BCCTYPE.INF FOR* NEWPDB.PDB PREP.INF \
      prmcrd antechamber.out leap.log sqm.in sqm.pdb sqm.out
exit(0)

error:
echo "  ${0}:  Program error"
exit(1)
